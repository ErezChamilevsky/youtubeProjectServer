<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
     <!-- img, videoSrc, title, publicationDate, views, description, likes -->
          <input name="userId" placeholder="User ID">
       <input name="img" placeholder="img"> 
<input name="videoSrc" placeholder="videoSrc"> 
<input name="title" placeholder="title">
<input name="publicationDate" placeholder="date">
<input name="views" placeholder="views">
<input name="description" placeholder="description">
<input name="likes" placeholder="likes">
<button onclick="create()">Create Video</button>
        <button onclick="createUser()">createUser</button>
        <!-- <input><button onclick="update()">update</button> -->
        <!-- <button onclick="del()">delete</button> {/* delete function */} -->
        <!-- <button onclick="getUserDeatails()">getUserDeatails</button> {/* get user details function */} -->
        


<script>


    // async function login() {
    //         const token = await fetch('http://localhost:12345/api/tokens', {
    //             method: "POST",
    //             headers: {
    //                 "Content-Type": "application/json",
    //             },
    //             body: JSON.stringify({ userName: document.getElementsByTagName('input')[0].value ,
    //             userPassword: document.getElementsByTagName('input')[1].value
    //             })
    //         }).then(data => data.json())
    //         console.log(user)
    //     }

    async function createUser() {
    const video = await fetch('http://localhost:12345/api/users/:1/videos', { // Ensure the correct user ID is used here
        method: "POST",
        headers: {
            "Content-Type": "application/json",
        },
        body: JSON.stringify({
            img: document.querySelector('input[name="img"]').value,
            videoSrc: document.querySelector('input[name="videoSrc"]').value,
            title: document.querySelector('input[name="title"]').value,
            publicationDate: document.querySelector('input[name="publicationDate"]').value,
            views: document.querySelector('input[name="views"]').value,
            description: document.querySelector('input[name="description"]').value,
            likes: document.querySelector('input[name="likes"]').value
        })
    }).then(response => response.json());

    console.log(video);
}


            async function create() {
            const userId = document.querySelector('input[name="userId"]').value;
            const img = document.querySelector('input[name="img"]').value;
            const videoSrc = document.querySelector('input[name="videoSrc"]').value;
            const title = document.querySelector('input[name="title"]').value;
            const publicationDate = document.querySelector('input[name="publicationDate"]').value;
            const views = parseInt(document.querySelector('input[name="views"]').value, 10) || 0;
            const description = document.querySelector('input[name="description"]').value;
            const likes = parseInt(document.querySelector('input[name="likes"]').value, 10) || 0;

            try {
                const response = await fetch(`http://localhost:12345/api/users/${userId}/videos`, {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    body: JSON.stringify({
                        img,
                        videoSrc,
                        title,
                        publicationDate,
                        views,
                        description,
                        likes
                    })
                });

                if (!response.ok) {
                    throw new Error('Failed to create video');
                }

                const createdVideo = await response.json();
                console.log('Created video:', createdVideo);
                alert('Video created successfully!');
            } catch (error) {
                console.error('Error creating video:', error);
                alert('Failed to create video');
            }
        }


    // async function update() {
    //     const user = await fetch('http://localhost:12345/api/users/' + document.getElementsByTagName('input')[5].value, {
    //         method: "PATCH",
    //         headers: {
    //             "Content-Type": "application/json",
    //         },
    //         body: JSON.stringify({ userName: document.getElementsByTagName('input')[0].value ,
    //         userPassword: document.getElementsByTagName('input')[1].value,
    //         userConfirmPassword: document.getElementsByTagName('input')[2].value,
    //         displayName: document.getElementsByTagName('input')[3].value,
    //         userImgFile: document.getElementsByTagName('input')[4].value,
    //         })
    //     }).then(data => data.json())
    //     console.log(user)
    // }

    // async function del() {
    //     const user = await fetch('http://localhost:12345/api/users/' + document.getElementsByTagName('input')[5].value, {
    //         method: "DELETE",
    //     }).then(data => data.json())
    //     console.log(user)
    // }


    async function getUserDeatails() {
        const user = await fetch('http://localhost:12345/api/users/1/videos',{
            method: "GET",
        }).then(data => data.json())
        console.log(user)
    }




    

</script>
    
</body>
</html>